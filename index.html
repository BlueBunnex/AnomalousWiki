<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="base.css">
    <style>
        body {
            padding: 0;
            margin: 6px;
            overflow-x: hidden;
        }

        #lightbox {
            display: none; /* by default */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 100;
        }

        #lightbox img {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            max-width: 95vw;
            max-height: 95vh;
        }

        #description {
            grid-column: span 3;
            padding: 12px;
            box-sizing: border-box;
        }

        #description a {
            font-weight: 900;
            font-style: italic;
            text-decoration: none;
            color: white;
        }

        #description #bluesky {
            background: -webkit-linear-gradient(0deg, #60d0ff, #80b0ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        #card-container {
            display: grid;
            gap: 4px;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            grid-auto-flow: dense;
            grid-auto-rows: 1fr;
        }

        .card {
            border: 1px solid black;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            will-change: transform; /* for rounded corners + overflow hidden + transition */
        }

        .card #image {
            background-color: black;
            background-size: cover;
            background-position: center;
            transition-duration: 0.5s;
            transition-timing-function: cubic-bezier(0.075, 0.82, 0.165, 1);

            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .card #controls {
            display: none;
            padding: 10px;
            grid-template-columns: auto auto;
            gap: 16px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;

            position: absolute;
            top: calc(50% - 80px);
            left: calc(50% - 80px);
            right: calc(50% - 80px);
            bottom: calc(50% - 80px);
        }
        
        .card #controls a {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .card #controls img {
            width: 72px;
            filter: invert(100%);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition-duration: 0.2s;
        }

        .card #controls a:hover img {
            filter: invert(60%);
        }

        .card:hover #image {
            filter: brightness(80%) blur(2px);
            transform: scale(1.1);
        }

        .card:hover #controls {
            display: grid;
        }
    </style>
    <script>
        var lightbox, lightboxImg;

        function openLightbox(src) {
            lightbox.style.display = "block";
            lightboxImg.src = src;
        }

        function closeLightbox() {
            lightbox.style.display = "none";
        }

        function setShow(value) {
            const d = new Date();

            if (value) {
                d.setTime(d.getTime() + (7*24*60*60*1000));
            } else {
                d.setTime(d.getTime() - 999);
            }
            
            document.cookie = "enable=set;expires=" + d.toUTCString() + ";path=/";
            location.reload();
        }

        function start() {
            lightbox = document.getElementById("lightbox");
            lightboxImg = lightbox.getElementsByTagName("img")[0];
        }
    </script>
</head>
<body onload="start();">

    <script src="trailer.js"></script>

    <div id="lightbox" onclick="closeLightbox();">
        <img src="img/002003.7cf93a7b.906616746.png">
    </div>

    <div id="card-container">
        
        <div id="description">
            <h1>dogmom</h1>
            <p>This website is dedicated to displaying a hand curated selection of quality AI NSFW art. Accepting submissions—just reply to me on bluesky.</p>
            <p>Due to statements by the U.S. Copyright Office (USCO), none of the art on this site is protected under copyright law. Which I mean, I don't really care, but also means that you are free—and encouraged—to download any art that you like.</p>
            
            <a id="bluesky" href="https://bsky.app/profile/dogmomai.top">Open Bluesky</a>
            ·
            <a style="color: #ffa090;" href="characters.html">Reoccurring Characters</a>
            ·
            <a id="total"></a>
        </div>
        
        <script>
            // prooobably make this externally managed at some point
            const imageList = [
                "img/002143.c7b84eb5.3945661160.png",
                "img/001833.3db490b7.2198661867.png",
                "img/001827.60ec4050.4149302688.png",
                "img/000005.png",
                "img/000004.png",
                "img/002077.61eb0927.4242745261.png",
                "img/002068.af3f2c9a.2487426750.png",
                "img/000823.7788928d.646955390.png",
                "img/000003.png",
                "img/000002.png",
                "img/000788.068e6bf6.661854339.png",
                "img/001709.fe6080f1.2384009962.png",
                "img/001705.8ee0fe10.1599807102.png",
                "img/001568.24b67f27.3083331721.png",
                "img/001527.248a2af6.1466960942.png",
                "img/001300.156c4958.3380335218.png",
                "img/002006.22c567a5.1382344067.png",
                "img/002003.7cf93a7b.906616746.png",
                "img/001999.d82c604e.938713496.png",
                "img/001962.85d518be.3741994020.png",
                "img/001886.475747bb.339805751.png",
                "img/001866.c3a846ae.2624838716.png",
                "img/000001.png",
                "img/000000.png"
            ];

            document.getElementById("total").innerHTML = imageList.length + " total images";
            
            const template = `
                <div class="card" style="%aspect%">
                    <div id="image" style="background-image: url('%url%');"></div>
                    <div id="controls">
                    
                        <!-- https://www.svgrepo.com/svg/470814/expand -->
                        <a href="javascript:openLightbox('%url%')"><img src="res/expand.svg"></a>

                        <!-- https://www.svgrepo.com/svg/470804/documents -->
                        <a href="javascript:navigator.clipboard.writeText('http://dogmomai.top/%url%');"><img src="res/copy.svg"></a>

                        <!-- https://www.svgrepo.com/svg/470808/download-alt -->
                        <a href="%url%" download="download"><img src="res/download.svg"></a>

                        <!-- https://www.svgrepo.com/svg/311440/warning -->
                        <a href="https://www.youtube.com"><img src="res/lock.svg"></a>
                        
                    </div>
                </div>
            `;
            const img = document.createElement('img');

            function insert(src) {
                let construct = template;
                
                img.src = src;
                
                construct = construct.replace(/%url%/g, src);

                if (img.naturalWidth > img.naturalHeight) {
                    construct = construct.replace("%aspect%", "grid-column: span 2;");
                } else {
                    // randomly make some images double the size
                    if (Math.random() > 0.8) {
                        construct = construct.replace("%aspect%", "aspect-ratio: 0.8333; grid-column: span 2; grid-row: span 2;");
                    } else {
                        construct = construct.replace("%aspect%", "aspect-ratio: 0.8333;");
                    }
                }
                
                document.write(construct);
            }

            if (decodeURIComponent(document.cookie).includes("enable=set")) {
                for (const imageSrc of imageList) {
                    insert(imageSrc);
                }
            } else {
                document.getElementById("description").innerHTML += (`
                    <br><br>
                    <div style="max-width: 600px; border: 2px solid red; border-radius: 10px; padding: 10px;">
                        This site contains suggestive content not intended for people under the age of eighteen. Only press the button below if you consent to, and are legally allowed to, view such imagery.
                        <br><br>
                        Additionally, if you know me... don't click the button below.
                        <br><br>
                        <button type="button" onclick="setShow(true);">I understand</button>
                    </div>
                `);
            }
        </script>
        
    </div>
  
</body>
</html>
